--------------------------------------------------------------------------------
-- Agda routing library
--
-- This module contains the definition of static schedules.
--------------------------------------------------------------------------------

module RoutingLib.Iteration.Asynchronous.Static.Schedule where

open import Level using (_âŠ”_)
open import Data.Nat using (â„•; zero; suc; zâ‰¤n; sâ‰¤s; _â‰Ÿ_; _â‰¤_; _+_)
open import Data.Nat.Properties using (nâ‰¤1+n; â‰¤-refl; â‰¤-trans)
open import Data.Fin using (Fin; zero; suc)
open import Data.Fin.Subset using (Subset; âŠ¤)

--------------------------------------------------------------------------------
-- Time --
--------------------------------------------------------------------------------
-- Some type definitions

-- Time
ğ•‹ : Set
ğ•‹ = â„•

-- Time periods
open import RoutingLib.Data.Range public
  renaming (Range to TimePeriod; _âˆˆ_ to _âˆˆâ‚œ_)

--------------------------------------------------------------------------------
-- Static schedules --
--------------------------------------------------------------------------------
-- A schedule dictating the flow of inforamtion within a computation
-- (ala Uresin & Dubois)
--
-- Schedules are represented as Ïˆ

record Schedule (n : â„•) : Set where
  field
    -- "Î± t" is the set of nodes that are active at time t
    Î± : (t : ğ•‹) â†’ Subset n
    -- "Î² t i j" is the time at which the data used by node i at time t was generated by node j
    Î² : (t : ğ•‹) (i j : Fin n) â†’ ğ•‹

    -- Information can only be used after it is generated
    Î²-causality   : âˆ€ t i j â†’ Î² (suc t) i j â‰¤ t

  -- Some derived properties
  Î²-decreasing : âˆ€ {t} i j â†’ 1 â‰¤ t â†’ Î² t i j â‰¤ t
  Î²-decreasing i j (sâ‰¤s zâ‰¤n) = â‰¤-trans (Î²-causality _ i j) (nâ‰¤1+n _)
